{% load widget_tweaks %}

<div class="modal-header stone-modal-header" style="background: linear-gradient(135deg, #efebe9 0%, #d7ccc8 100%); padding: 1.5rem 2rem; border-bottom: 1px solid #E8DCC8; border-radius: 16px 16px 0 0;">
    <div class="d-flex align-items-center gap-3">
        <div class="header-icon-box" style="width: 48px; height: 48px; background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(4px); border-radius: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(139, 115, 85, 0.15); color: #6F5B44; font-size: 1.25rem;">
            {% if bodega %}
                <i class="fas fa-edit"></i>
            {% else %}
                <i class="fas fa-plus"></i>
            {% endif %}
        </div>
        <div>
            <h5 class="modal-title fw-bold m-0" style="color: #5D4037; font-family: 'Poppins', sans-serif;">
                {% if bodega %}Editar Bodega{% else %}Nueva Bodega{% endif %}
            </h5>
            <p class="m-0 text-muted small" style="font-size: 0.85rem;">
                {% if bodega %}Modifique los datos de la bodega{% else %}Ingrese los datos para registrar una nueva bodega{% endif %}
            </p>
        </div>
    </div>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="opacity: 0.5;"></button>
</div>

<div class="modal-body p-4" style="background: white; border-radius: 0 0 16px 16px;">
    <form id="bodegaForm" method="post" action="{% if bodega %}{% url 'bodegas:bodega_update_modal' bodega.pk %}{% else %}{% url 'bodegas:bodega_create_modal' %}{% endif %}">
        {% csrf_token %}
        
        <div class="mb-3">
            <label for="id_codigo" class="form-label small fw-bold text-muted text-uppercase" style="letter-spacing: 0.5px; color: #8B7355 !important;">CÃ³digo</label>
            <input type="text" class="form-control" id="id_codigo" name="codigo" 
                   value="{% if bodega %}{{ bodega.codigo }}{% else %}{{ form.codigo.value|default:'' }}{% endif %}" 
                   placeholder="Ej: BOD-001" required
                   style="border-radius: 8px; border: 1px solid #D4C4A8; padding: 0.5rem 0.75rem; font-size: 0.9rem;">
            {% if form.codigo.errors %}
                <div class="text-danger small mt-1">{{ form.codigo.errors.0 }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="id_nombre" class="form-label small fw-bold text-muted text-uppercase" style="letter-spacing: 0.5px; color: #8B7355 !important;">Nombre</label>
            <input type="text" class="form-control" id="id_nombre" name="nombre" 
                   value="{% if bodega %}{{ bodega.nombre }}{% else %}{{ form.nombre.value|default:'' }}{% endif %}" 
                   placeholder="Nombre de la bodega" required
                   style="border-radius: 8px; border: 1px solid #D4C4A8; padding: 0.5rem 0.75rem; font-size: 0.9rem;">
            {% if form.nombre.errors %}
                <div class="text-danger small mt-1">{{ form.nombre.errors.0 }}</div>
            {% endif %}
        </div>
        
        <div class="mb-3">
            <label for="id_sucursal" class="form-label small fw-bold text-muted text-uppercase" style="letter-spacing: 0.5px; color: #8B7355 !important;">Sucursal</label>
            {{ form.sucursal|add_class:"form-select"|attr:"style:border-radius: 8px; border: 1px solid #D4C4A8; padding: 0.4rem 0.75rem; font-size: 0.9rem;" }}
            {% if form.sucursal.errors %}
                <div class="text-danger small mt-1">{{ form.sucursal.errors.0 }}</div>
            {% endif %}
        </div>
        
        <div class="mb-4">
             <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="id_activa" name="activa" 
                       {% if bodega %}{% if bodega.activa %}checked{% endif %}{% else %}checked{% endif %}
                       style="background-color: #8B7355; border-color: #8B7355;">
                <label class="form-check-label text-dark fw-medium" for="id_activa">Bodega Activa</label>
            </div>
            <div class="form-text small text-muted ms-1">
                <i class="fas fa-info-circle me-1"></i>Las bodegas inactivas no pueden recibir ni enviar stock.
            </div>
        </div>

        <div class="d-flex justify-content-end gap-2 pt-3 border-top" style="border-color: #E8DCC8 !important;">
            <button type="button" class="btn btn-light border" data-bs-dismiss="modal" style="color: #6F5B44; font-weight: 500;">Cancelar</button>
            <button type="submit" class="btn text-white" style="background: linear-gradient(135deg, #8B7355 0%, #6F5B44 100%); font-weight: 500; border: none;">
                <i class="fas fa-save me-2"></i>Guardar Bodega
            </button>
        </div>
    </form>
</div>

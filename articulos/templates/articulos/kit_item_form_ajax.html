{% load widget_tweaks %}

<form method="post" action="{% if action == 'Agregar' %}{% url 'articulos:kit_item_create' kit.pk %}{% else %}{% url 'articulos:kit_item_update' form.instance.pk %}{% endif %}" id="kit-item-form">
    {% csrf_token %}
    
    <div class="mb-4">
        <label class="form-label-premium"><i class="fas fa-box me-2"></i>Seleccionar Artículo *</label>
        {% render_field form.articulo class="form-control form-control-premium select2-modal" %}
        {% if form.articulo.errors %}
            <div class="text-danger extra-small mt-1">{{ form.articulo.errors.0 }}</div>
        {% endif %}
    </div>

    <div class="row g-3">
        <div class="col-md-6 mb-4">
            <label class="form-label-premium"><i class="fas fa-sort-numeric-up me-2"></i>Cantidad *</label>
            {% render_field form.cantidad class="form-control form-control-premium text-center" placeholder="1" %}
            {% if form.cantidad.errors %}
                <div class="text-danger extra-small mt-1">{{ form.cantidad.errors.0 }}</div>
            {% endif %}
        </div>

        <div class="col-md-6 mb-4">
            <label class="form-label-premium"><i class="fas fa-sort me-2"></i>Orden Visual</label>
            {% render_field form.orden class="form-control form-control-premium text-center" placeholder="0" %}
            {% if form.orden.errors %}
                <div class="text-danger extra-small mt-1">{{ form.orden.errors.0 }}</div>
            {% endif %}
        </div>
    </div>

    <div class="mb-4">
        <label class="form-label-premium"><i class="fas fa-comment me-2"></i>Notas sobre el Artículo</label>
        {% render_field form.observaciones class="form-control form-control-premium" rows="2" placeholder="Opcional..." %}
        {% if form.observaciones.errors %}
            <div class="text-danger extra-small mt-1">{{ form.observaciones.errors.0 }}</div>
        {% endif %}
    </div>

    <div class="d-flex justify-content-end gap-3 pt-3 border-top">
        <button type="button" class="btn btn-light btn-sm px-4 rounded-pill border" data-bs-dismiss="modal">
            Cancelar
        </button>
        <button type="submit" class="btn btn-piedra-primary btn-sm px-4">
            <i class="fas fa-check me-2"></i>{{ action }} al Kit
        </button>
    </div>
</form>

<style>
    .form-label-premium {
        font-weight: 700;
        color: var(--color-piedra-texto, #5D4037);
        font-size: 0.7rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 0.4rem;
        display: block;
    }

    .form-control-premium {
        border-radius: 10px;
        border: 1px solid var(--color-piedra-borde, #d7ccc8);
        padding: 0.5rem 0.8rem;
        font-size: 0.85rem;
        background-color: #fdfcfb;
    }

    .btn-piedra-primary {
        background: linear-gradient(135deg, #8D6E63 0%, #5D4037 100%);
        color: white !important;
        border: none;
        border-radius: 10px;
        font-weight: 600;
        box-shadow: 0 4px 10px rgba(93, 64, 55, 0.15);
        transition: all 0.3s ease;
    }
    
    .btn-piedra-primary:hover {
        transform: translateY(-1px);
        box-shadow: 0 6px 15px rgba(93, 64, 55, 0.25);
    }

    .extra-small { font-size: 0.65rem; }
</style>
